(this.webpackJsonpcovid=this.webpackJsonpcovid||[]).push([[0],{18:function(e,t,n){e.exports=n(29)},27:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(13),o=n.n(a),r=n(0),c=n.n(r),l=n(30),i=n(33),u=n(31),s=n(15),d=n(9),m=n.n(d),f=n(14),h=n(6);function v(e){var t=Object(r.useState)(),n=Object(h.a)(t,2),a=n[0],o=n[1];return Object(r.useEffect)((function(){function t(){return(t=Object(f.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).then((function(e){return e.json()}),(function(e){return console.log(e)}));case 2:n=t.sent,o(n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e&&function(){t.apply(this,arguments)}()}),[e]),a}var p=function(e){var t=v(e.url);function n(e,t,n){return c.a.createElement(i.a,{style:{backgroundColor:n,color:"white"}},c.a.createElement(i.a.Body,null,c.a.createElement("h5",null,e),c.a.createElement("h2",null,t.toLocaleString())))}return c.a.createElement(l.a,{className:"cards"},c.a.createElement(u.a,null,c.a.createElement(s.a,{lg:!0},n("Confirmed",t?t.confirmed&&t.confirmed.value:"loading...","#355cfa")),c.a.createElement(s.a,{lg:!0},n("Deaths",t?t.confirmed&&t.deaths.value:"loading...","#ee3045")),c.a.createElement(s.a,{lg:!0},n("Recovered",t?t.confirmed&&t.recovered.value:"loading...","#119a84")),c.a.createElement(s.a,{lg:!0},n("Fatality Rate",t?(t.deaths.value/t.confirmed.value*100).toFixed(2)+"%":"loading...","#fe6f4c"))))},g=n(32),E="https://covid19.mathdro.id/api/countries";function b(){var e=Object(r.useState)("AFG"),t=Object(h.a)(e,2),n=t[0],a=t[1],o=v(E);var l=E+"/".concat(n);return c.a.createElement("div",{className:"panel panel-countryselector"},c.a.createElement(g.a,null,c.a.createElement("h3",null,"Select a country to see stats: ",n),c.a.createElement(g.a.Control,{as:"select",style:{maxWidth:"400px"},onChange:function(e){a(e.target.value)}},function(e){return e?Object.entries(e.countries).map((function(e){var t=Object(h.a)(e,2),n=t[0],a=t[1];return c.a.createElement("option",{key:n,value:a.iso3},a.name)})):"loading..."}(o))),c.a.createElement(p,{url:l}))}var y="AIzaSyBejPpobPd1CP5i6XFXwZUQhkKoVsXdeGc";var j=function(){var e=Object(r.useState)(),t=Object(h.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(),l=Object(h.a)(o,2),i=l[0],u=l[1];return Object(r.useEffect)((function(){new Promise((function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e({lat:t.coords.latitude,long:t.coords.longitude})}),(function(e){return t("error: ".concat(e))})):alert("Geolocation is not supported by your browser")})).then((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.lat,n=e.long;return new Promise((function(e,a){if(t&&n){var o="https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(t,", ").concat(n,"&key=").concat(y);fetch(o).then((function(e){return e.json()})).then((function(t){var n,o,r;t.results[0].address_components.forEach((function(e){e.types.includes("country")&&(n=e.long_name,o=e.short_name),e.types.includes("administrative_area_level_1")&&(r=e.long_name)})),n&&o&&r?e({countryName:n,countryCode:o,region:r}):a(new Error("something went wrong in reverseGeoCoding"))}))}}))}(e)})).then((function(e){console.log(e),a(e)})).catch((function(e){return console.log(e)}))}),[]),Object(r.useEffect)((function(){fetch("https://covid19.mathdro.id/api/confirmed").then((function(e){return e.json()})).then((function(e){if(n){var t=e.find((function(e){return e.provinceState===n.region}));console.log(t),u(t)}}))}),[n]),c.a.createElement("div",{className:"panel panel-local"},c.a.createElement("div",null,c.a.createElement("h3",null,"Current location:"),c.a.createElement("span",null,n?n&&"".concat(n.countryName,", "):"loading..."),c.a.createElement("span",null,n?n&&n.region:"loading...")),c.a.createElement("div",null,"National stats",n&&c.a.createElement(p,{url:"https://covid19.mathdro.id/api/countries/"+n.countryCode})),c.a.createElement("div",null,"Region stats",c.a.createElement("div",null,"Confirmed: ",i?i.confirmed:"loading..."),c.a.createElement("div",null,"Recovered: ",i?i.recovered:"loading..."),c.a.createElement("div",null,"Deaths: ",i?i.deaths:"loading..."),c.a.createElement("div",null,"Fatality Rate:"," ",i?"".concat(100*(i.deaths/i.confirmed).toFixed(3),"%"):"loading...")))},C=n(16),O={title:"New Cases on Earth",hAxis:{title:"Date"},vAxis:{title:"Number"},backgroundColor:"#f7f7f7"};function w(){var e=Object(r.useState)(),t=Object(h.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=[["Date","New cases"]];fetch("https://covid19.mathdro.id/api/daily").then((function(e){return e.json()})).then((function(t){console.log(t),t.map((function(t){e.push([t.reportDate,t.deltaConfirmed])})),a(e)}))}),[]),c.a.createElement("div",null,c.a.createElement(C.a,{chartType:"AreaChart",loader:c.a.createElement("div",null,"Loading Chart"),data:n,options:O,width:"100%",height:"400px",rootProps:{"data-testid":"3"}}))}n(27),n(28);var N=function(){return c.a.createElement(l.a,{fluid:!0,className:"app"},"Covid-19 Stats",c.a.createElement("div",{className:"panel panel-earth"},c.a.createElement("h3",null,"Total on Earth: "),c.a.createElement(p,{url:"https://covid19.mathdro.id/api"}),c.a.createElement(w,null)),c.a.createElement(j,null),c.a.createElement(b,null))};o.a.render(c.a.createElement(N,null),document.querySelector("#root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.dd82aa13.chunk.js.map