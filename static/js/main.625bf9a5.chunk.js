(this.webpackJsonpcovid=this.webpackJsonpcovid||[]).push([[0],{18:function(e,t,n){e.exports=n(29)},27:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(13),r=n.n(a),o=n(0),c=n.n(o),l=n(30),i=n(33),u=n(10),s=n.n(u),m=n(14),d=n(6);function f(e){var t=Object(o.useState)(),n=Object(d.a)(t,2),a=n[0],r=n[1];return Object(o.useEffect)((function(){function t(){return(t=Object(m.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).then((function(e){return e.json()}),(function(e){return console.log(e)}));case 2:n=t.sent,r(n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e&&function(){t.apply(this,arguments)}()}),[e]),console.log(a),a}var h=n(31),v=n(15);function p(e){var t=e.confirmedNum,n=e.deathsNum,a=e.recoveredNum,r=(n/t*100).toFixed(2)+"%";function o(e,t,n){return c.a.createElement(i.a,{style:{backgroundColor:n,color:"white"}},c.a.createElement(i.a.Body,null,c.a.createElement("h5",null,e),c.a.createElement("h1",null,t.toLocaleString())))}return c.a.createElement(l.a,{className:"cards"},c.a.createElement(h.a,null,c.a.createElement(v.a,{lg:!0},o("Confirmed",t,"#355cfa")),c.a.createElement(v.a,{lg:!0},o("Deaths",n,"#ee3045")),c.a.createElement(v.a,{lg:!0},o("Recovered",a,"#119a84")),c.a.createElement(v.a,{lg:!0},o("Fatality Rate",r,"#fe6f4c"))))}function E(e){var t=f(e.url);return c.a.createElement(p,{confirmedNum:t?t.confirmed&&t.confirmed.value:"loading...",deathsNum:t?t.confirmed&&t.deaths.value:"loading...",recoveredNum:t?t.confirmed&&t.recovered.value:"loading..."})}var g=n(32),b="https://covid19.mathdro.id/api/countries";function N(){var e=Object(o.useState)("AFG"),t=Object(d.a)(e,2),n=t[0],a=t[1],r=f(b);var l=b+"/".concat(n);return c.a.createElement("div",{className:"m-5"},c.a.createElement(g.a,null,c.a.createElement("h3",null,"Select a country to see stats: ",n),c.a.createElement(g.a.Control,{as:"select",style:{maxWidth:"400px"},onChange:function(e){a(e.target.value)}},function(e){return e?Object.entries(e.countries).map((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return c.a.createElement("option",{key:n,value:a.iso3},a.name)})):"loading..."}(r))),c.a.createElement(E,{url:l}))}var j="AIzaSyBejPpobPd1CP5i6XFXwZUQhkKoVsXdeGc";var y=function(){var e=Object(o.useState)(),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)(),l=Object(d.a)(r,2),i=l[0],u=l[1];return Object(o.useEffect)((function(){new Promise((function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e({lat:t.coords.latitude,long:t.coords.longitude})}),(function(e){return t("error: ".concat(e))})):alert("Geolocation is not supported by your browser")})).then((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.lat,n=e.long;return new Promise((function(e,a){if(t&&n){var r="https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(t,", ").concat(n,"&key=").concat(j);fetch(r).then((function(e){return e.json()})).then((function(t){var n,r,o;t.results[0].address_components.forEach((function(e){e.types.includes("country")&&(n=e.long_name,r=e.short_name),e.types.includes("administrative_area_level_1")&&(o=e.long_name)})),n&&r&&o?e({countryName:n,countryCode:r,region:o}):a(new Error("something went wrong in reverseGeoCoding"))}))}}))}(e)})).then((function(e){console.log(e),a(e)})).catch((function(e){return console.log(e)}))}),[]),Object(o.useEffect)((function(){fetch("https://covid19.mathdro.id/api/confirmed").then((function(e){return e.json()})).then((function(e){if(n){var t=e.find((function(e){return e.provinceState===n.region}));console.log(t),u(t)}}))}),[n]),c.a.createElement("div",{className:"m-5"},c.a.createElement("div",null,c.a.createElement("h3",{className:"mb-2"},"Current location:"," ",c.a.createElement("span",null,n?n&&"".concat(n.countryName,", "):"loading..."),c.a.createElement("span",null,n?n&&n.region:"loading..."))),c.a.createElement("div",null,c.a.createElement("h5",null,n?n&&"".concat(n.countryName):""),n&&c.a.createElement(E,{url:"https://covid19.mathdro.id/api/countries/"+n.countryCode})),c.a.createElement("div",null,c.a.createElement("h5",null,n?n&&n.region:""),c.a.createElement(p,{confirmedNum:i?i.confirmed:"loading...",deathsNum:i?i.deaths:"loading...",recoveredNum:i?i.recovered:"loading..."})))},O=n(16),C={title:"New Cases on Earth",hAxis:{title:"Date"},vAxis:{title:"Number"},backgroundColor:"#f7f7f7"};function w(){var e=Object(o.useState)(),t=Object(d.a)(e,2),n=t[0],a=t[1];return Object(o.useEffect)((function(){var e=[["Date","New cases"]];fetch("https://covid19.mathdro.id/api/daily").then((function(e){return e.json()})).then((function(t){t.map((function(t){e.push([t.reportDate,t.deltaConfirmed])})),a(e)}))}),[]),c.a.createElement("div",null,c.a.createElement(O.a,{chartType:"AreaChart",loader:c.a.createElement("div",null,"Loading Chart"),data:n,options:C,width:"100%",height:"400px",rootProps:{"data-testid":"3"}}))}function S(){return c.a.createElement("div",{className:"m-5"},c.a.createElement("h3",null,"Total on Earth"),c.a.createElement(E,{url:"https://covid19.mathdro.id/api"}),c.a.createElement(w,null))}n(27),n(28);var x=function(){return c.a.createElement(l.a,{fluid:!0,className:"app"},c.a.createElement("h2",null,"Covid-19 Stats"),c.a.createElement(i.a,{className:"panel"},c.a.createElement(S,null)),c.a.createElement(i.a,{className:"panel"},c.a.createElement(y,null)),c.a.createElement(i.a,{className:"panel"},c.a.createElement(N,null)))};r.a.render(c.a.createElement(x,null),document.querySelector("#root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.625bf9a5.chunk.js.map