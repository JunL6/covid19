{"version":3,"sources":["utils/useStats.js","components/StatsDisplay.js","components/CountrySelector.js","utils/reverseGeoCoding.js","components/GeoLocationStats.js","utils/getGeoLocation.js","components/EarthStats.js","components/App.js","index.js"],"names":["useStats","url","useState","stats","setStats","useEffect","a","fetch","then","res","json","reason","console","log","data","fetchData","StatsDisplay","renderCard","title","bgColor","Card","style","backgroundColor","color","Body","toLocaleString","Container","className","Row","Col","lg","confirmed","value","deaths","recovered","toFixed","URL_COUNTRIES","CountrySelector","selectedCountryCode","setSelectedCountryCode","countries","url_selectedCountry","Form","Control","as","maxWidth","onChange","e","target","Object","entries","map","code","key","iso3","name","renderCountryList","KEY","GeoLocationStats","location","setLocation","regionStat","setRegionStat","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","position","lat","coords","latitude","long","longitude","error","alert","countryName","countryCode","region","results","address_components","forEach","element","types","includes","long_name","short_name","Error","reverseGeoCoding","locationInfo","catch","stat","find","obj","provinceState","options","hAxis","vAxis","EarthStats","earthDailyStats","setEarthDailyStats","statsArray","push","reportDate","deltaConfirmed","chartType","loader","width","height","rootProps","App","fluid","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.dd82aa13.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\";\n\nexport default function useStats(url) {\n  const [stats, setStats] = useState();\n\n  useEffect(() => {\n    if (!url) {\n      return;\n    }\n    async function fetchData() {\n      const data = await fetch(url).then(\n        (res) => res.json(),\n        (reason) => console.log(reason)\n      );\n\n      setStats(data);\n    }\n\n    fetchData();\n  }, [url]);\n\n  return stats;\n}\n","import React, { useState } from \"react\";\nimport { Container, Row, Col, Card } from \"react-bootstrap\";\n\nimport useStats from \"../utils/useStats\";\n\nfunction StatsDisplay({ url }) {\n  const data = useStats(url);\n\n  function renderCard(title, data, bgColor) {\n    return (\n      <Card style={{ backgroundColor: bgColor, color: \"white\" }}>\n        <Card.Body>\n          <h5>{title}</h5>\n          <h2>{data.toLocaleString()}</h2>\n        </Card.Body>\n      </Card>\n    );\n  }\n\n  return (\n    <Container className=\"cards\">\n      <Row>\n        <Col lg>\n          {renderCard(\n            \"Confirmed\",\n            data ? data.confirmed && data.confirmed.value : `loading...`,\n            \"#355cfa\"\n          )}\n        </Col>\n        <Col lg>\n          {renderCard(\n            \"Deaths\",\n            data ? data.confirmed && data.deaths.value : `loading...`,\n            \"#ee3045\"\n          )}\n        </Col>\n        <Col lg>\n          {renderCard(\n            \"Recovered\",\n            data ? data.confirmed && data.recovered.value : `loading...`,\n            \"#119a84\"\n          )}\n        </Col>\n        <Col lg>\n          {renderCard(\n            \"Fatality Rate\",\n            data\n              ? ((data.deaths.value / data.confirmed.value) * 100).toFixed(2) +\n                  \"%\"\n              : `loading...`,\n            \"#fe6f4c\"\n          )}\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n\nexport default StatsDisplay;\n","import React, { useState } from \"react\";\nimport { Form } from \"react-bootstrap\";\n\nimport StatsDisplay from \"./StatsDisplay\";\nimport useStats from \"../utils/useStats\";\n\nconst URL_COUNTRIES = \"https://covid19.mathdro.id/api/countries\";\n\nexport default function CountrySelector() {\n  const [selectedCountryCode, setSelectedCountryCode] = useState(\"AFG\");\n\n  const countries = useStats(URL_COUNTRIES);\n  function renderCountryList(countries) {\n    if (!countries) {\n      return `loading...`;\n    } else {\n      const result = Object.entries(countries.countries).map(\n        ([code, value]) => {\n          return (\n            <option key={code} value={value.iso3}>\n              {value.name}\n            </option>\n          );\n        }\n      );\n      return result;\n    }\n  }\n  const url_selectedCountry = URL_COUNTRIES + `/${selectedCountryCode}`;\n\n  return (\n    <div className=\"panel panel-countryselector\">\n      <Form>\n        <h3>Select a country to see stats: {selectedCountryCode}</h3>\n        <Form.Control\n          as=\"select\"\n          style={{ maxWidth: \"400px\" }}\n          onChange={(e) => {\n            setSelectedCountryCode(e.target.value);\n          }}\n        >\n          {renderCountryList(countries)}\n        </Form.Control>\n      </Form>\n      <StatsDisplay url={url_selectedCountry} />\n    </div>\n  );\n}\n","const KEY = `AIzaSyBejPpobPd1CP5i6XFXwZUQhkKoVsXdeGc`;\n\nexport default function reverseGeoCoding({ lat, long } = {}) {\n  return new Promise((resolve, reject) => {\n    if (!lat || !long) {\n      return;\n    }\n    const url = `https://maps.googleapis.com/maps/api/geocode/json?latlng=${lat}, ${long}&key=${KEY}`;\n\n    fetch(url)\n      .then((res) => res.json())\n      .then((data) => {\n        let countryName, countryCode, region;\n        const locInfo = data.results[0].address_components;\n        locInfo.forEach((element) => {\n          if (element.types.includes(\"country\")) {\n            countryName = element.long_name;\n            countryCode = element.short_name;\n          }\n          if (element.types.includes(\"administrative_area_level_1\")) {\n            region = element.long_name;\n          }\n        });\n        if (countryName && countryCode && region) {\n          resolve({ countryName, countryCode, region });\n        } else {\n          reject(new Error(`something went wrong in reverseGeoCoding`));\n        }\n      });\n  });\n}\n","import React, { useState, useEffect } from \"react\";\nimport StatsDisplay from \"./StatsDisplay\";\nimport getGeoLocation from \"../utils/getGeoLocation\";\n// import useReverseGeoCoding from \"../utils/useReverseGeoCoding\";\nimport reverseGeoCoding from \"../utils/reverseGeoCoding\";\nimport useStats from \"../utils/useStats\";\n\nconst URL_COUNTRY = `https://covid19.mathdro.id/api/countries/`;\nconst URL_GLOBAL = `https://covid19.mathdro.id/api/confirmed`;\n\nconst GeoLocationStats = () => {\n  const [location, setLocation] = useState();\n  const [regionStat, setRegionStat] = useState();\n  useEffect(() => {\n    getGeoLocation()\n      .then((res) => reverseGeoCoding(res))\n      .then((locationInfo) => {\n        console.log(locationInfo);\n        setLocation(locationInfo);\n      })\n      // .then((res) => {\n      //   return fetch(`https://covid19.mathdro.id/api/confirmed`);\n      // })\n      .catch((error) => console.log(error));\n  }, []);\n\n  useEffect(() => {\n    fetch(`https://covid19.mathdro.id/api/confirmed`)\n      .then((res) => res.json())\n      .then((data) => {\n        if (location) {\n          const stat = data.find(\n            (obj) => obj.provinceState === location.region\n          );\n          console.log(stat);\n          setRegionStat(stat);\n        }\n      });\n  }, [location]);\n\n  return (\n    <div className=\"panel panel-local\">\n      <div>\n        <h3>Current location:</h3>\n        <span>\n          {location ? location && `${location.countryName}, ` : `loading...`}\n        </span>\n        <span>{location ? location && location.region : `loading...`}</span>\n      </div>\n      <div>\n        National stats\n        {location && <StatsDisplay url={URL_COUNTRY + location.countryCode} />}\n      </div>\n      <div>\n        Region stats\n        <div>Confirmed: {regionStat ? regionStat.confirmed : `loading...`}</div>\n        <div>Recovered: {regionStat ? regionStat.recovered : `loading...`}</div>\n        <div>Deaths: {regionStat ? regionStat.deaths : `loading...`}</div>\n        <div>\n          Fatality Rate:{\" \"}\n          {regionStat\n            ? `${(regionStat.deaths / regionStat.confirmed).toFixed(3) * 100}%`\n            : `loading...`}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GeoLocationStats;\n","export default function getGeoLocation() {\n  return new Promise((resolve, reject) => {\n    function handleSuccess(position) {\n      resolve({\n        lat: position.coords.latitude,\n        long: position.coords.longitude,\n      });\n    }\n\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(handleSuccess, (error) =>\n        reject(`error: ${error}`)\n      );\n    } else {\n      alert(\"Geolocation is not supported by your browser\");\n    }\n  });\n}\n","import React, { useState, useEffect } from \"react\";\nimport { Chart } from \"react-google-charts\";\n\nconst urlEarthDaily = \"https://covid19.mathdro.id/api/daily\";\n\nconst options = {\n  title: \"New Cases on Earth\",\n  hAxis: { title: \"Date\" },\n  vAxis: { title: \"Number\" },\n  backgroundColor: \"#f7f7f7\",\n  // legend: \"none\",\n};\nconst data = [\n  [\"Age\", \"Weight\"],\n  [8, 12],\n  [4, 5.5],\n  [11, 14],\n  [4, 5],\n  [3, 3.5],\n  [6.5, 7],\n];\n\n// const earthDailyStats = [[\"Date\", \"Confirmed\", \"Deaths\", \"New cases\"]];\n\nexport default function EarthStats() {\n  const [earthDailyStats, setEarthDailyStats] = useState();\n\n  useEffect(() => {\n    const statsArray = [\n      [\n        \"Date\",\n        // { type: \"date\", label: \"Day\" },\n        // \"Confirmed\",\n        // \"Deaths\",\n        \"New cases\",\n      ],\n    ];\n    fetch(urlEarthDaily)\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(data);\n        data.map((obj) => {\n          statsArray.push([\n            obj.reportDate,\n            // obj.confirmed.total,\n            // obj.deaths.total,\n            obj.deltaConfirmed,\n          ]);\n        });\n        // console.log(statsArray);\n        setEarthDailyStats(statsArray);\n      });\n  }, []);\n\n  return (\n    <div>\n      <Chart\n        chartType=\"AreaChart\"\n        loader={<div>Loading Chart</div>}\n        data={earthDailyStats}\n        options={options}\n        width=\"100%\"\n        height=\"400px\"\n        rootProps={{ \"data-testid\": \"3\" }}\n      />\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Container } from \"react-bootstrap\";\n\nimport StatsDisplay from \"./StatsDisplay\";\n// import LocalStats from \"./LocalStats\";\nimport CountrySelector from \"./CountrySelector\";\nimport GeoLocationStats from \"./GeoLocationStats\";\nimport EarthStats from \"./EarthStats\";\nimport \"../css/App.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nconst urlEarth = \"https://covid19.mathdro.id/api\";\n\nconst App = () => {\n  return (\n    <Container fluid className=\"app\">\n      Covid-19 Stats\n      <div className=\"panel panel-earth\">\n        <h3>Total on Earth: </h3>\n        <StatsDisplay url={urlEarth} />\n        <EarthStats />\n      </div>\n      {/* <LocalStats /> */}\n      <GeoLocationStats />\n      <CountrySelector />\n    </Container>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport App from \"./components/App\";\n\nReactDOM.render(<App />, document.querySelector(\"#root\"));\n"],"sourceRoot":""}