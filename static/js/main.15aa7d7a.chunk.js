(this.webpackJsonpcovid=this.webpackJsonpcovid||[]).push([[0],{14:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(4),o=n.n(a),r=n(0),c=n.n(r),l=n(2),i=n.n(l),u=n(5),s=n(1);function d(e){var t=Object(r.useState)(),n=Object(s.a)(t,2),a=n[0],o=n[1];return Object(r.useEffect)((function(){function t(){return(t=Object(u.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).then((function(e){return e.json()}),(function(e){return console.log(e)}));case 2:n=t.sent,o(n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e&&function(){t.apply(this,arguments)}()}),[e]),a}n(14);var m=function(e){var t=d(e.url);return c.a.createElement("div",{className:"stats-display"},c.a.createElement("div",null,"Confirmed:"," ",t?t.confirmed&&t.confirmed.value:"loading..."),c.a.createElement("div",null,"Deaths: ",t?t.confirmed&&t.deaths.value:"loading..."),c.a.createElement("div",null,"Recovered:"," ",t?t.confirmed&&t.recovered.value:"loading..."),c.a.createElement("div",null,"Fatality Rate:",t?"".concat(t.confirmed&&100*(t.deaths.value/t.confirmed.value).toFixed(3),"%"):"loading..."))};function f(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],o=d("https://covid19.mathdro.id/api/countries");var l="https://covid19.mathdro.id/api/countries/".concat(n);return c.a.createElement("div",{className:"panel panel-countryselector"},c.a.createElement("h3",null,"Select a country to see stats"),c.a.createElement("div",null,c.a.createElement("select",{onChange:function(e){a(e.target.value)}},function(e){return e?Object.entries(e.countries).map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return c.a.createElement("option",{key:n,value:a.iso3},a.name)})):"loading..."}(o)),c.a.createElement("span",null,"selected country: ",n)),c.a.createElement(m,{url:l}))}var v="AIzaSyBejPpobPd1CP5i6XFXwZUQhkKoVsXdeGc";var h=function(){var e=Object(r.useState)(),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(),l=Object(s.a)(o,2),i=l[0],u=l[1];return Object(r.useEffect)((function(){new Promise((function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e({lat:t.coords.latitude,long:t.coords.longitude})}),(function(e){return t("error: ".concat(e))})):alert("Geolocation is not supported by your browser")})).then((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.lat,n=e.long;return new Promise((function(e,a){if(t&&n){var o="https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(t,", ").concat(n,"&key=").concat(v);fetch(o).then((function(e){return e.json()})).then((function(t){var n,o,r;t.results[0].address_components.forEach((function(e){e.types.includes("country")&&(n=e.long_name,o=e.short_name),e.types.includes("administrative_area_level_1")&&(r=e.long_name)})),n&&o&&r?e({countryName:n,countryCode:o,region:r}):a(new Error("something went wrong in reverseGeoCoding"))}))}}))}(e)})).then((function(e){console.log(e),a(e)})).catch((function(e){return console.log(e)}))}),[]),Object(r.useEffect)((function(){fetch("https://covid19.mathdro.id/api/confirmed").then((function(e){return e.json()})).then((function(e){if(n){var t=e.find((function(e){return e.provinceState===n.region}));console.log(t),u(t)}}))}),[n]),c.a.createElement("div",{className:"panel panel-local"},c.a.createElement("div",null,c.a.createElement("h3",null,"Current location:"),c.a.createElement("span",null,n?n&&"".concat(n.countryName,", "):"loading..."),c.a.createElement("span",null,n?n&&n.region:"loading...")),c.a.createElement("div",null,"National stats",n&&c.a.createElement(m,{url:"https://covid19.mathdro.id/api/countries/"+n.countryCode})),c.a.createElement("div",null,"Region stats",c.a.createElement("div",null,"Confirmed: ",i?i.confirmed:"loading..."),c.a.createElement("div",null,"Recovered: ",i?i.recovered:"loading..."),c.a.createElement("div",null,"Deaths: ",i?i.deaths:"loading..."),c.a.createElement("div",null,"Fatality Rate:"," ",i?"".concat(100*(i.deaths/i.confirmed).toFixed(3),"%"):"loading...")))},p=n(6),g={title:"Total stats on earth",hAxis:{title:"Date"},vAxis:{title:"Number"}};function E(){var e=Object(r.useState)(),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=[["Date","Confirmed","Deaths","New cases"]];fetch("https://covid19.mathdro.id/api/daily").then((function(e){return e.json()})).then((function(t){console.log(t),t.map((function(t){e.push([t.reportDate,t.confirmed.total,t.deaths.total,t.deltaConfirmed])})),a(e)}))}),[]),c.a.createElement("div",null,c.a.createElement(p.a,{chartType:"AreaChart",loader:c.a.createElement("div",null,"Loading Chart"),data:n,options:g,width:"100%",height:"400px",rootProps:{"data-testid":"3"}}))}n(18);var b=function(){return c.a.createElement("div",{className:"app"},"Covid-19 Stats",c.a.createElement("div",{className:"panel panel-earth"},c.a.createElement("h3",null,"Total on Earth: "),c.a.createElement(m,{url:"https://covid19.mathdro.id/api"}),c.a.createElement(E,null)),c.a.createElement(h,null),c.a.createElement(f,null))};o.a.render(c.a.createElement(b,null),document.querySelector("#root"))},8:function(e,t,n){e.exports=n(19)}},[[8,1,2]]]);
//# sourceMappingURL=main.15aa7d7a.chunk.js.map